import{c as T,r as y,j as e,X as O,P as be,S as he,a as Ue}from"./index-BJtz6KXr.js";const ze=[["path",{d:"M3 5v14",key:"1nt18q"}],["path",{d:"M8 5v14",key:"1ybrkv"}],["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"M17 5v14",key:"ycjyhj"}],["path",{d:"M21 5v14",key:"nzette"}]],X=T("barcode",ze);const Be=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],qe=T("camera",Be);const Re=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],_e=T("circle-alert",Re);const Te=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Fe=T("pen",Te);const $e=[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]],Le=T("shuffle",$e);const We=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],fe=T("trash-2",We);function Ge({isOpen:o,onClose:d,units:m,onUpdateUnits:f}){const[w,x]=y.useState(null),[v,g]=y.useState(""),[k,W]=y.useState("");if(!o)return null;const z=()=>{const N=String(k||"").trim();if(!N||m.some(h=>h.toLowerCase()===N.toLowerCase()))return;const b=[...m,N];f(b),W("")},B=N=>{const b=String(v||"").trim();if(!b||m.some((n,E)=>E!==N&&n.toLowerCase()===b.toLowerCase()))return;const h=[...m];h[N]=b,f(h),x(null)},K=N=>{const b=m.filter((h,n)=>n!==N);f(b)};return e.jsxDEV("div",{className:"product-modal-overlay",onClick:d,style:{zIndex:1e4},children:e.jsxDEV("div",{className:"product-modal",onClick:N=>N.stopPropagation(),style:{maxWidth:"400px"},children:[e.jsxDEV("div",{className:"product-modal-header",children:[e.jsxDEV("div",{children:[e.jsxDEV("h2",{children:"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙˆØ­Ø¯Ø§Øª"},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/UnitManagerModal.jsx",lineNumber:43,columnNumber:25},this),e.jsxDEV("p",{children:"Ø¥Ø¶Ø§ÙØ©ØŒ ØªØ¹Ø¯ÙŠÙ„ØŒ ÙˆØ­Ø°Ù Ø§Ù„ÙˆØ­Ø¯Ø§Øª"},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/UnitManagerModal.jsx",lineNumber:44,columnNumber:25},this)]},void 0,!0,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/UnitManagerModal.jsx",lineNumber:42,columnNumber:21},this),e.jsxDEV("button",{type:"button",className:"close-button",onClick:d,children:e.jsxDEV(O,{size:20},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/UnitManagerModal.jsx",lineNumber:47,columnNumber:25},this)},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/UnitManagerModal.jsx",lineNumber:46,columnNumber:21},this)]},void 0,!0,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/UnitManagerModal.jsx",lineNumber:41,columnNumber:17},this),e.jsxDEV("div",{className:"product-modal-body",style:{display:"flex",flexDirection:"column",gap:"16px"},children:[e.jsxDEV("div",{className:"field-with-button",children:[e.jsxDEV("input",{type:"text",className:"form-input",placeholder:"Ø§Ø³Ù… Ø§Ù„ÙˆØ­Ø¯Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©...",value:k,onChange:N=>W(N.target.value),onKeyDown:N=>N.key==="Enter"&&z()},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/UnitManagerModal.jsx",lineNumber:53,columnNumber:25},this),e.jsxDEV("button",{type:"button",className:"btn-save",onClick:z,style:{width:"auto"},children:[e.jsxDEV(be,{size:16},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/UnitManagerModal.jsx",lineNumber:62,columnNumber:29},this)," Ø¥Ø¶Ø§ÙØ©"]},void 0,!0,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/UnitManagerModal.jsx",lineNumber:61,columnNumber:25},this)]},void 0,!0,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/UnitManagerModal.jsx",lineNumber:52,columnNumber:21},this),e.jsxDEV("div",{style:{border:"1px solid #e2e8f0",borderRadius:"8px",overflow:"hidden"},children:[m.map((N,b)=>e.jsxDEV("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px",borderBottom:b<m.length-1?"1px solid #e2e8f0":"none",backgroundColor:b%2===0?"#fafafa":"#fff"},children:w===b?e.jsxDEV("div",{className:"field-with-button",style:{flex:1,marginRight:"8px"},children:[e.jsxDEV("input",{type:"text",className:"form-input",value:v,onChange:h=>g(h.target.value),onKeyDown:h=>h.key==="Enter"&&B(b),autoFocus:!0},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/UnitManagerModal.jsx",lineNumber:71,columnNumber:41},this),e.jsxDEV("button",{type:"button",className:"btn-icon",onClick:()=>B(b),style:{color:"#10b981"},children:e.jsxDEV(he,{size:16},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/UnitManagerModal.jsx",lineNumber:80,columnNumber:45},this)},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/UnitManagerModal.jsx",lineNumber:79,columnNumber:41},this),e.jsxDEV("button",{type:"button",className:"btn-icon",onClick:()=>x(null),children:e.jsxDEV(O,{size:16},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/UnitManagerModal.jsx",lineNumber:83,columnNumber:45},this)},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/UnitManagerModal.jsx",lineNumber:82,columnNumber:41},this)]},void 0,!0,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/UnitManagerModal.jsx",lineNumber:70,columnNumber:37},this):e.jsxDEV(e.Fragment,{children:[e.jsxDEV("span",{style:{fontWeight:"500"},children:N},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/UnitManagerModal.jsx",lineNumber:88,columnNumber:41},this),e.jsxDEV("div",{style:{display:"flex",gap:"8px"},children:[e.jsxDEV("button",{type:"button",className:"btn-icon",onClick:()=>{x(b),g(N)},children:e.jsxDEV(Fe,{size:16},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/UnitManagerModal.jsx",lineNumber:91,columnNumber:49},this)},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/UnitManagerModal.jsx",lineNumber:90,columnNumber:45},this),e.jsxDEV("button",{type:"button",className:"btn-icon",onClick:()=>K(b),style:{color:"#ef4444"},children:e.jsxDEV(fe,{size:16},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/UnitManagerModal.jsx",lineNumber:94,columnNumber:49},this)},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/UnitManagerModal.jsx",lineNumber:93,columnNumber:45},this)]},void 0,!0,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/UnitManagerModal.jsx",lineNumber:89,columnNumber:41},this)]},void 0,!0,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/UnitManagerModal.jsx",lineNumber:87,columnNumber:37},this)},b,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/UnitManagerModal.jsx",lineNumber:68,columnNumber:29},this)),m.length===0&&e.jsxDEV("div",{style:{padding:"16px",textAlign:"center",color:"#64748b"},children:"Ù„Ø§ ØªÙˆØ¬Ø¯ ÙˆØ­Ø¯Ø§Øª"},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/UnitManagerModal.jsx",lineNumber:102,columnNumber:29},this)]},void 0,!0,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/UnitManagerModal.jsx",lineNumber:66,columnNumber:21},this)]},void 0,!0,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/UnitManagerModal.jsx",lineNumber:51,columnNumber:17},this),e.jsxDEV("div",{className:"product-modal-footer",children:e.jsxDEV("button",{type:"button",className:"btn-cancel",onClick:d,children:"Ø¥ØºÙ„Ø§Ù‚"},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/UnitManagerModal.jsx",lineNumber:110,columnNumber:21},this)},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/UnitManagerModal.jsx",lineNumber:109,columnNumber:17},this)]},void 0,!0,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/UnitManagerModal.jsx",lineNumber:40,columnNumber:13},this)},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/UnitManagerModal.jsx",lineNumber:39,columnNumber:9},this)}const M={BASIC:"basic",PRICING:"pricing"},_={unitName:"",salePrice:0,wholesalePrice:0,minSalePrice:0,purchasePrice:0,barcode:""},ee=()=>`variant-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,Y=()=>({tempId:ee(),id:null,size:"",color:"",price:0,cost:0,quantity:0,barcode:""}),Oe=new Set(["salePrice","wholesalePrice","minSalePrice","purchasePrice"]),i=o=>String(o??"").trim(),U=(o,d=0)=>{const m=Number.parseFloat(String(o??"").replace(",","."));return Number.isFinite(m)?m:d},D=(o,d=0)=>{const m=Number.parseInt(String(o??"").replace(/[^0-9-]/g,""),10);return Number.isFinite(m)?m:d},u=o=>Number(Math.max(0,U(o,0)).toFixed(2)),Z=(o,d)=>{const m=U(o,0),f=U(d,0);return m<=0?0:Number(((f-m)/m*100).toFixed(2))},xe=(o="")=>{const d=i(o).replace(/[^\w\u0600-\u06FF\s-]/g,"").split(/\s+/).filter(Boolean).slice(0,3).map(f=>f.slice(0,3).toUpperCase()).join("-"),m=Date.now().toString().slice(-6);return`${d||"PRD"}-${m}`},Ke=o=>(10-String(o).replace(/\D/g,"").padStart(12,"0").slice(0,12).split("").map(f=>Number(f)).reduce((f,w,x)=>f+(x%2===0?w:w*3),0)%10)%10,je=()=>{const o=Date.now().toString().slice(-5),d=Math.floor(Math.random()*1e5).toString().padStart(5,"0"),m=`20${o}${d}`;return`${m}${Ke(m)}`},de=["Ù‚Ø·Ø¹Ø©","ÙƒØ±ØªÙˆÙ†Ø©","Ø¹Ù„Ø¨Ø©","ÙƒÙŠÙ„Ùˆ","Ù„ØªØ±","Ù…ØªØ±","Ø¬Ø±Ø§Ù…","Ø±Ø²Ù…Ø©"],Qe=()=>{try{const o=localStorage.getItem("erp_custom_units");return o?JSON.parse(o):de}catch{return de}},L=(o,d)=>{const m=i(o?.unitName)||"Ù‚Ø·Ø¹Ø©",f=u(o?.salePrice),w=u(o?.purchasePrice),x=u(Math.max(0,U(o?.wholesalePrice,f))),v=u(Math.max(0,U(o?.minSalePrice,x)));return{unitName:m,salePrice:f,wholesalePrice:x,minSalePrice:v,purchasePrice:w,barcode:i(o?.barcode)}},Ne=o=>{if(!o)return{name:"",categoryId:"",brand:"",description:"",sku:xe(),barcode:je(),image:"",type:"store",isActive:!0,minStock:5,maxStock:100,notes:"",unit:{..._,unitName:"Ù‚Ø·Ø¹Ø©"},hasVariants:!1,variants:[],variantSizeDraft:"S, M, L, XL",variantColorDraft:"Ø£Ø³ÙˆØ¯, Ø£Ø¨ÙŠØ¶"};const d={..._,unitName:i(o.unitName)||"Ù‚Ø·Ø¹Ø©",salePrice:u(o.basePrice),wholesalePrice:u(o.wholesalePrice??o.basePrice),minSalePrice:u(o.minSalePrice??o.wholesalePrice??o.basePrice),purchasePrice:u(o.cost),barcode:i(o.barcode)},m=L(d),x=(Array.isArray(o.variants)?o.variants:[]).filter(v=>i(v.productSize)||i(v.color)).map(v=>({tempId:ee(),id:v.id||null,size:i(v.productSize),color:i(v.color),price:u(v.price),cost:u(v.cost),quantity:Math.max(0,D(v.quantity,0)),barcode:i(v.barcode)}));return{name:i(o.name),categoryId:o.categoryId?String(o.categoryId):"",brand:i(o.brand),description:i(o.description),sku:i(o.sku),barcode:i(o.barcode),image:i(o.image),type:i(o.type)||"store",isActive:o.isActive??!0,minStock:Math.max(0,D(o?.inventory?.minStock,5)),maxStock:Math.max(0,D(o?.inventory?.maxStock,100)),notes:i(o?.inventory?.notes),unit:m,hasVariants:x.length>0,variants:x,variantSizeDraft:"S, M, L, XL",variantColorDraft:"Ø£Ø³ÙˆØ¯, Ø£Ø¨ÙŠØ¶"}};function Je({isOpen:o,onClose:d,onSave:m,mode:f="create",isLoadingProduct:w=!1,initialData:x=null,categories:v=[],isSaving:g=!1}){const[k,W]=y.useState([]),[z,B]=y.useState([]),[K,N]=y.useState({}),[b,h]=y.useState(M.BASIC),[n,E]=y.useState(()=>Ne(x)),[se,S]=y.useState(""),re=y.useRef(null),[Q,ye]=y.useState(Qe),[De,te]=y.useState(!1),I=f==="edit",F=g||I&&w;y.useEffect(()=>{if(!o||I&&(w||!x))return;const s=Ne(x);E(s),S(""),h(M.BASIC),(async()=>{const r=await window.api.getWarehouses();if(r?.error||W(Array.isArray(r)?r.filter(t=>t.isActive):[]),x?.id){const t=await window.api.getWarehouseStocks(x.id);if(!t?.error)if(t&&typeof t=="object"&&!Array.isArray(t)){B(Array.isArray(t.totals)?t.totals:[]);const l={};(Array.isArray(t.variants)?t.variants:[]).forEach(c=>{const a=c?.id?`id:${c.id}`:null;a&&(l[a]={},(Array.isArray(c.warehouseStocks)?c.warehouseStocks:[]).forEach(V=>{const C=D(V?.warehouseId,0),G=Math.max(0,D(V?.quantity,0));C>0&&G>0&&(l[a][C]=G)}))}),N(l)}else B(Array.isArray(t)?t:[]),N({})}else B([]),N({})})()},[o,x,I,w]),y.useEffect(()=>{if(!o)return;const s=r=>{r.key==="Escape"&&!g&&d()};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[o,g,d]);const j=y.useMemo(()=>L(n.unit||_),[n.unit]),H=y.useMemo(()=>n.hasVariants?Math.max(0,(Array.isArray(n.variants)?n.variants:[]).reduce((s,r)=>s+D(r?.quantity,0),0)):Math.max(0,z.reduce((s,r)=>s+D(r?.quantity,0),0)),[n.hasVariants,n.variants,z]);y.useEffect(()=>{N(s=>{const r={...s},t=new Set;let l=!1;return(Array.isArray(n.variants)?n.variants:[]).forEach(c=>{const a=c?.id?`id:${c.id}`:`temp:${c?.tempId}`;!a||a==="temp:"||(t.add(a),r[a]||(r[a]={},l=!0))}),Object.keys(r).forEach(c=>{t.has(c)||(delete r[c],l=!0)}),l?r:s})},[n.variants]);const oe=s=>s?.id?`id:${s.id}`:`temp:${s?.tempId}`,J=(s,r)=>{const t=oe(s);return Math.max(0,D(K?.[t]?.[r],0))},ne=s=>k.reduce((r,t)=>r+J(s,t.id),0),ve=(s,r,t)=>{const l=oe(s);!l||l==="temp:"||N(c=>{const a={...c[l]||{}},V=Math.max(0,D(t,0));V>0?a[r]=V:delete a[r];const C={...c};return C[l]=a,C})},P=(s,r)=>{E(t=>({...t,[s]:r}))},q=(s,r)=>{E(t=>{const l=L(t.unit||_);if(s==="purchasePrice"){const c=u(r),a=Z(l.purchasePrice,l.salePrice),V=u(c*(1+a/100));l.purchasePrice=c,l.salePrice=V}else if(s==="salePrice"){const c=u(r);l.salePrice=c}else s==="wholesalePrice"?l.wholesalePrice=u(r):s==="minSalePrice"?l.minSalePrice=u(r):l[s]=Oe.has(s)?U(r,0):r;return{...t,unit:l}})},ke=s=>{E(r=>{const t=L(r.unit||_),l=Math.max(-100,U(s,0)),c=u(t.purchasePrice*(1+l/100));return t.salePrice=c,t.wholesalePrice=c,t.minSalePrice=Math.min(t.minSalePrice,c),{...r,unit:t}})},A=(s,r,t)=>{E(l=>{const c=[...l.variants],a={...c[s]||Y()};return r==="price"||r==="cost"?a[r]=u(t):r==="quantity"?a.quantity=Math.max(0,D(t,0)):a[r]=t,c[s]=a,{...l,variants:c}})},Me=(s={})=>{E(r=>({...r,hasVariants:!0,variants:[...r.variants,{...Y(),price:u(s.price??j.salePrice),cost:u(s.cost??j.purchasePrice),...s}]}))},we=s=>{E(r=>({...r,variants:r.variants.filter((t,l)=>l!==s)}))},Pe=s=>{E(r=>s?r.variants.length>0?{...r,hasVariants:!0}:{...r,hasVariants:!0,variants:[{...Y(),size:"M",color:"Ø£Ø³ÙˆØ¯",price:u(j.salePrice),cost:u(j.purchasePrice)}]}:{...r,hasVariants:!1,variants:[]})},ce=({excludeProduct:s=!1,excludeVariantIndex:r=null}={})=>{const t=new Set;if(!s){const l=i(n.barcode);l&&t.add(l.toLowerCase())}return n.variants.forEach((l,c)=>{if(r!==null&&c===r)return;const a=i(l?.barcode);a&&t.add(a.toLowerCase())}),t},le=s=>{for(let r=0;r<60;r+=1){const t=je();if(!s.has(t.toLowerCase()))return t}return`${Date.now()}${Math.floor(Math.random()*10)}`.slice(0,13)},ie=()=>{const s=ce({excludeProduct:!0});P("barcode",le(s))},Ve=s=>{const r=ce({excludeVariantIndex:s});A(s,"barcode",le(r))},ge=()=>{F||re.current?.click()},Ee=()=>{P("image","")},Se=s=>{const r=s.target.files?.[0];if(s.target.value="",!r)return;if(!r.type.startsWith("image/")){S("Ø§Ø®ØªØ± Ù…Ù„Ù ØµÙˆØ±Ø© ØµØ§Ù„Ø­ (PNG/JPG/WebP)."),h(M.BASIC);return}const t=2*1024*1024;if(r.size>t){S("Ø­Ø¬Ù… Ø§Ù„ØµÙˆØ±Ø© ÙƒØ¨ÙŠØ±. Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ 2MB."),h(M.BASIC);return}const l=new FileReader;l.onload=()=>{const c=i(l.result);P("image",c),S("")},l.onerror=()=>{S("ØªØ¹Ø°Ø± Ù‚Ø±Ø§Ø¡Ø© Ù…Ù„Ù Ø§Ù„ØµÙˆØ±Ø©."),h(M.BASIC)},l.readAsDataURL(r)},ae=y.useCallback(s=>{const r=s.target;if(!r||r.tagName!=="INPUT")return;const t=String(r.type||"").toLowerCase();t==="checkbox"||t==="radio"||r.readOnly||r.disabled||typeof r.select=="function"&&r.select()},[]),Ce=()=>{if(I&&w)return;S("");const s=i(n.name);if(!s){S("Ø§Ø³Ù… Ø§Ù„ØµÙ†Ù Ù…Ø·Ù„ÙˆØ¨."),h(M.BASIC);return}const r=L(n.unit||_),t=(n.hasVariants?n.variants:[]).map(p=>({tempId:p.tempId||ee(),id:p.id?D(p.id,0):null,size:i(p.size)||"Ù…ÙˆØ­Ø¯",color:i(p.color)||"Ø§ÙØªØ±Ø§Ø¶ÙŠ",price:u(p.price||r.salePrice),cost:u(p.cost||r.purchasePrice),quantity:Math.max(0,D(p.quantity,0)),barcode:i(p.barcode)||null})).filter(p=>p.size||p.color||p.price||p.cost||p.quantity||p.barcode);if(n.hasVariants&&t.length===0){S("Ø£Ø¶Ù Ù…ØªØºÙŠØ±Ù‹Ø§ ÙˆØ§Ø­Ø¯Ù‹Ø§ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„ Ø£Ùˆ Ø£Ù„ØºÙ Ø®ÙŠØ§Ø± Ø§Ù„Ø£Ù„ÙˆØ§Ù†/Ø§Ù„Ù…Ù‚Ø§Ø³Ø§Øª."),h(M.PRICING);return}const l=t.map(p=>i(p.barcode).toLowerCase()).filter(Boolean);if(new Set(l).size!==l.length){S("ÙŠÙˆØ¬Ø¯ Ø¨Ø§Ø±ÙƒÙˆØ¯ Ù…ÙƒØ±Ø± Ø¨ÙŠÙ† Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª."),h(M.PRICING);return}const c=i(n.barcode)||i(r.barcode),a=[...l,c.toLowerCase()].filter(Boolean);if(new Set(a).size!==a.length){S("ÙŠÙˆØ¬Ø¯ ØªØ¹Ø§Ø±Ø¶ Ø¨Ø§Ø±ÙƒÙˆØ¯ Ø¨ÙŠÙ† Ø§Ù„Ù…Ù†ØªØ¬ ÙˆØ§Ù„Ù…ØªØºÙŠØ±Ø§Øª."),h(M.PRICING);return}const V=i(n.categoryId)||null,C=Math.max(0,D(n.minStock,5)),G=Math.max(C,D(n.maxStock,100)),me=[];if(n.hasVariants&&k.length>0)for(let p=0;p<t.length;p+=1){const R=t[p],$=n.variants[p]||R,Ae=ne($);R.quantity=Ae;for(const pe of k){const ue=J($,pe.id);ue<=0||me.push({variantId:R.id||null,tempId:R.tempId||$.tempId||null,warehouseId:pe.id,quantity:ue})}}const Ie=k.map(p=>{const R=z.find($=>$.warehouseId===p.id);return{warehouseId:p.id,quantity:R?Math.max(0,D(R.quantity,0)):0}}).filter(p=>p.quantity>0||f==="edit");m({name:s,categoryId:V,brand:i(n.brand)||null,description:i(n.description)||null,sku:i(n.sku)||null,barcode:c||null,image:i(n.image)||null,type:i(n.type)||"store",isActive:!!n.isActive,totalQuantity:H,minStock:C,maxStock:G,notes:i(n.notes)||null,unitName:i(r.unitName)||"Ù‚Ø·Ø¹Ø©",hasVariants:!!n.hasVariants,variants:t,basePrice:u(r.salePrice),cost:u(r.purchasePrice),wholesalePrice:u(r.wholesalePrice),minSalePrice:u(r.minSalePrice),warehouseStocks:Ie,variantWarehouseStocks:me})};return o?e.jsxDEV("div",{className:"product-modal-overlay",onClick:()=>!g&&d(),children:[e.jsxDEV("div",{className:"product-modal",onClick:s=>s.stopPropagation(),children:[e.jsxDEV("div",{className:"product-modal-header",children:[e.jsxDEV("div",{children:[e.jsxDEV("h2",{children:I?"ØªØ¹Ø¯ÙŠÙ„ Ù…Ù†ØªØ¬":"Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯"},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:656,columnNumber:13},this),e.jsxDEV("p",{children:I?"Ø­Ø¯Ù‘Ø« Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù†ØªØ¬ ÙˆØ§Ù„ØªØ³Ø¹ÙŠØ± ÙˆØ§Ù„Ù…Ø®Ø²ÙˆÙ†":"Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© ÙˆØ§Ù„ØªØ³Ø¹ÙŠØ± ÙˆØ§Ù„Ù…Ø®Ø²ÙˆÙ†"},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:657,columnNumber:13},this)]},void 0,!0,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:655,columnNumber:11},this),e.jsxDEV("button",{type:"button",className:"close-button",onClick:d,disabled:g,children:e.jsxDEV(O,{size:20},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:660,columnNumber:13},this)},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:659,columnNumber:11},this)]},void 0,!0,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:654,columnNumber:9},this),e.jsxDEV("div",{className:"product-modal-tabs",children:[e.jsxDEV("button",{type:"button",className:`tab-button ${b===M.BASIC?"active":""}`,onClick:()=>h(M.BASIC),disabled:F,children:"Ø¨ÙŠØ§Ù†Ø§Øª Ø£Ø³Ø§Ø³ÙŠØ©"},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:665,columnNumber:11},this),e.jsxDEV("button",{type:"button",className:`tab-button ${b===M.PRICING?"active":""}`,onClick:()=>h(M.PRICING),disabled:F,children:"Ø§Ù„ØªØ³Ø¹ÙŠØ± ÙˆØ§Ù„Ù…Ø®Ø²ÙˆÙ†"},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:668,columnNumber:11},this)]},void 0,!0,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:664,columnNumber:9},this),e.jsxDEV("div",{className:"product-modal-body",children:I&&w?e.jsxDEV("div",{className:"product-modal-loading",children:[e.jsxDEV("span",{className:"product-modal-loading-spinner",children:"ðŸ”„"},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:676,columnNumber:15},this),e.jsxDEV("span",{children:"Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù†ØªØ¬..."},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:677,columnNumber:15},this)]},void 0,!0,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:675,columnNumber:13},this):e.jsxDEV(e.Fragment,{children:[se?e.jsxDEV("div",{className:"modal-inline-alert",children:[e.jsxDEV(_e,{size:16},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:683,columnNumber:19},this),e.jsxDEV("span",{children:se},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:684,columnNumber:19},this)]},void 0,!0,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:682,columnNumber:17},this):null,b===M.BASIC?e.jsxDEV("div",{className:"form-section",children:e.jsxDEV("div",{className:"basic-layout",children:[e.jsxDEV("div",{className:"image-panel",children:[e.jsxDEV("input",{ref:re,type:"file",accept:"image/*",className:"image-file-input",onChange:Se},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:692,columnNumber:23},this),e.jsxDEV("div",{className:"image-upload-wrap",children:[e.jsxDEV("button",{type:"button",className:"image-upload-box",onClick:ge,children:n.image?e.jsxDEV("img",{src:n.image,alt:n.name||"Product"},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:695,columnNumber:45},this):e.jsxDEV(qe,{size:34},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:695,columnNumber:109},this)},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:694,columnNumber:25},this),n.image?e.jsxDEV("button",{type:"button",className:"image-clear-fab",onClick:s=>{s.stopPropagation(),Ee()},"aria-label":"Ø­Ø°Ù Ø§Ù„ØµÙˆØ±Ø©",title:"Ø­Ø°Ù Ø§Ù„ØµÙˆØ±Ø©",disabled:F,children:e.jsxDEV(O,{size:14},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:709,columnNumber:29},this)},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:698,columnNumber:27},this):null]},void 0,!0,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:693,columnNumber:23},this),e.jsxDEV("div",{className:"image-status-row",children:e.jsxDEV("label",{className:"toggle-switch",children:[e.jsxDEV("input",{type:"checkbox",checked:n.isActive,onChange:s=>P("isActive",s.target.checked)},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:716,columnNumber:27},this),e.jsxDEV("span",{className:"toggle-slider"},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:717,columnNumber:27},this),e.jsxDEV("span",{children:n.isActive?"Ø§Ù„Ù…Ù†ØªØ¬ Ù†Ø´Ø·":"Ø§Ù„Ù…Ù†ØªØ¬ ØºÙŠØ± Ù†Ø´Ø·"},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:718,columnNumber:27},this)]},void 0,!0,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:715,columnNumber:25},this)},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:714,columnNumber:23},this)]},void 0,!0,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:691,columnNumber:21},this),e.jsxDEV("div",{className:"main-form-grid",children:[e.jsxDEV("div",{className:"form-row",children:[e.jsxDEV("label",{className:"form-group",children:[e.jsxDEV("span",{children:"Ø§Ø³Ù… Ø§Ù„ØµÙ†Ù"},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:726,columnNumber:27},this),e.jsxDEV("input",{type:"text",className:"form-input",value:n.name,onChange:s=>P("name",s.target.value),placeholder:"Ù…Ø«Ø§Ù„: ØªÙŠØ´ÙŠØ±Øª Ù‚Ø·Ù†"},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:727,columnNumber:27},this)]},void 0,!0,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:725,columnNumber:25},this),e.jsxDEV("label",{className:"form-group",children:[e.jsxDEV("span",{children:"Ø§Ù„ÙØ¦Ø©"},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:736,columnNumber:27},this),e.jsxDEV("select",{className:"form-select",value:n.categoryId,onChange:s=>P("categoryId",s.target.value),children:[e.jsxDEV("option",{value:"",children:"Ø¨Ø¯ÙˆÙ† ÙØ¦Ø©"},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:738,columnNumber:29},this),v.map(s=>e.jsxDEV("option",{value:s.id,children:[s.icon||"ðŸ“¦"," ",s.name]},s.id,!0,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:740,columnNumber:31},this))]},void 0,!0,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:737,columnNumber:27},this)]},void 0,!0,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:735,columnNumber:25},this)]},void 0,!0,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:724,columnNumber:23},this),e.jsxDEV("div",{className:"form-row",children:[e.jsxDEV("label",{className:"form-group",children:[e.jsxDEV("span",{children:"SKU / ÙƒÙˆØ¯ Ø§Ù„ØµÙ†Ù"},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:748,columnNumber:27},this),e.jsxDEV("div",{className:"field-with-button",children:[e.jsxDEV("input",{type:"text",className:"form-input",value:n.sku,onChange:s=>P("sku",s.target.value)},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:750,columnNumber:29},this),e.jsxDEV("button",{type:"button",className:"btn-icon",onClick:()=>P("sku",xe(n.name)),title:"ØªÙˆÙ„ÙŠØ¯ ÙƒÙˆØ¯",children:e.jsxDEV(Le,{size:14},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:752,columnNumber:31},this)},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:751,columnNumber:29},this)]},void 0,!0,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:749,columnNumber:27},this)]},void 0,!0,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:747,columnNumber:25},this),e.jsxDEV("label",{className:"form-group",children:[e.jsxDEV("span",{children:"Ø¨Ø§Ø±ÙƒÙˆØ¯ Ø§Ù„Ù…Ù†ØªØ¬"},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:757,columnNumber:27},this),e.jsxDEV("div",{className:"field-with-button",children:[e.jsxDEV("input",{type:"text",className:"form-input",value:n.barcode,onChange:s=>P("barcode",s.target.value)},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:759,columnNumber:29},this),e.jsxDEV("button",{type:"button",className:"btn-icon",onClick:ie,title:"ØªÙˆÙ„ÙŠØ¯ Ø¨Ø§Ø±ÙƒÙˆØ¯",children:e.jsxDEV(X,{size:14},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:761,columnNumber:31},this)},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:760,columnNumber:29},this)]},void 0,!0,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:758,columnNumber:27},this)]},void 0,!0,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:756,columnNumber:25},this)]},void 0,!0,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:746,columnNumber:23},this),e.jsxDEV("div",{className:"form-row",children:[e.jsxDEV("label",{className:"form-group",children:[e.jsxDEV("span",{children:"Ø§Ù„Ù…Ø§Ø±ÙƒØ©"},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:769,columnNumber:27},this),e.jsxDEV("input",{type:"text",className:"form-input",value:n.brand,onChange:s=>P("brand",s.target.value)},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:770,columnNumber:27},this)]},void 0,!0,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:768,columnNumber:25},this),e.jsxDEV("label",{className:"form-group",children:[e.jsxDEV("span",{children:"Ù†ÙˆØ¹ Ø§Ù„Ù…Ù†ØªØ¬"},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:773,columnNumber:27},this),e.jsxDEV("select",{className:"form-select",value:n.type,onChange:s=>P("type",s.target.value),children:[e.jsxDEV("option",{value:"store",children:"Ù…Ù†ØªØ¬ Ù…Ø®Ø²Ù†ÙŠ"},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:775,columnNumber:29},this),e.jsxDEV("option",{value:"service",children:"Ø®Ø¯Ù…Ø©"},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:776,columnNumber:29},this)]},void 0,!0,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:774,columnNumber:27},this)]},void 0,!0,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:772,columnNumber:25},this)]},void 0,!0,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:767,columnNumber:23},this),e.jsxDEV("div",{className:"form-row",children:e.jsxDEV("label",{className:"form-group form-grow",children:[e.jsxDEV("span",{children:"Ø§Ù„ÙˆØµÙ"},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:783,columnNumber:27},this),e.jsxDEV("textarea",{className:"form-input",rows:3,value:n.description,onChange:s=>P("description",s.target.value),placeholder:"ÙˆØµÙ Ù…Ø®ØªØµØ± Ù„Ù„ØµÙ†Ù"},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:784,columnNumber:27},this)]},void 0,!0,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:782,columnNumber:25},this)},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:781,columnNumber:23},this)]},void 0,!0,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:723,columnNumber:21},this)]},void 0,!0,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:690,columnNumber:19},this)},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:689,columnNumber:17},this):null,b===M.PRICING?e.jsxDEV("div",{className:"form-section",onFocusCapture:ae,onClickCapture:ae,children:[e.jsxDEV("div",{className:"form-row",children:[e.jsxDEV("label",{className:"form-group",children:[e.jsxDEV("span",{children:"Ø§Ù„ÙˆØ­Ø¯Ø© Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©"},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:807,columnNumber:23},this),e.jsxDEV("div",{className:"field-with-button",children:[e.jsxDEV("select",{className:"form-select",value:j.unitName,onChange:s=>q("unitName",s.target.value),children:[!Q.includes(j.unitName)&&j.unitName?e.jsxDEV("option",{value:j.unitName,children:j.unitName},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:815,columnNumber:29},this):null,Q.map(s=>e.jsxDEV("option",{value:s,children:s},s,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:818,columnNumber:29},this))]},void 0,!0,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:809,columnNumber:25},this),e.jsxDEV("button",{type:"button",className:"btn-icon",onClick:()=>te(!0),title:"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙˆØ­Ø¯Ø§Øª",children:e.jsxDEV(Ue,{size:14},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:822,columnNumber:27},this)},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:821,columnNumber:25},this)]},void 0,!0,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:808,columnNumber:23},this)]},void 0,!0,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:806,columnNumber:21},this),e.jsxDEV("label",{className:"form-group",children:[e.jsxDEV("span",{children:"Ø³Ø¹Ø± Ø§Ù„Ø¬Ù…Ù„Ø©"},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:827,columnNumber:23},this),e.jsxDEV("input",{type:"number",step:"0.01",min:"0",className:"form-input",value:j.wholesalePrice,onChange:s=>q("wholesalePrice",s.target.value)},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:828,columnNumber:23},this)]},void 0,!0,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:826,columnNumber:21},this)]},void 0,!0,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:805,columnNumber:19},this),e.jsxDEV("div",{className:"form-row",children:[e.jsxDEV("label",{className:"form-group",children:[e.jsxDEV("span",{children:"Ø£Ù‚Ù„ Ø³Ø¹Ø± Ø¨ÙŠØ¹"},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:841,columnNumber:23},this),e.jsxDEV("input",{type:"number",step:"0.01",min:"0",className:"form-input",value:j.minSalePrice,onChange:s=>q("minSalePrice",s.target.value)},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:842,columnNumber:23},this)]},void 0,!0,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:840,columnNumber:21},this),e.jsxDEV("label",{className:"form-group",children:[e.jsxDEV("span",{children:"Ø­Ø¯ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø·Ù„Ø¨ Ù„Ù„Ù…Ø®Ø²ÙˆÙ†"},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:852,columnNumber:23},this),e.jsxDEV("input",{type:"number",min:"0",className:"form-input",value:n.minStock,onChange:s=>P("minStock",D(s.target.value,5))},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:853,columnNumber:23},this)]},void 0,!0,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:851,columnNumber:21},this)]},void 0,!0,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:839,columnNumber:19},this),e.jsxDEV("section",{className:"unified-pricing-section",style:{marginTop:"24px",borderTop:"1px solid #e2e8f0",paddingTop:"24px"},children:[e.jsxDEV("div",{className:"variants-header",style:{marginBottom:"16px"},children:[e.jsxDEV("label",{className:"toggle-switch",children:[e.jsxDEV("input",{type:"checkbox",checked:n.hasVariants,onChange:s=>Pe(s.target.checked)},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:860,columnNumber:25},this),e.jsxDEV("span",{className:"toggle-slider"},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:865,columnNumber:25},this),e.jsxDEV("span",{children:"Ø§Ù„Ù…Ù†ØªØ¬ Ù„Ù‡ Ø£Ù„ÙˆØ§Ù†/Ù…Ù‚Ø§Ø³Ø§Øª"},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:866,columnNumber:25},this)]},void 0,!0,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:859,columnNumber:23},this),n.hasVariants?e.jsxDEV("div",{className:"variants-actions",children:e.jsxDEV("button",{type:"button",className:"btn-inline",onClick:()=>Me(),children:[e.jsxDEV(be,{size:14},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:872,columnNumber:29},this),"Ø¥Ø¶Ø§ÙØ© Ù…ØªØºÙŠØ±"]},void 0,!0,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:871,columnNumber:27},this)},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:870,columnNumber:25},this):null]},void 0,!0,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:858,columnNumber:21},this),e.jsxDEV("div",{className:"variants-table-wrap",children:e.jsxDEV("table",{className:"variants-table",children:[e.jsxDEV("thead",{children:e.jsxDEV("tr",{children:[n.hasVariants&&e.jsxDEV("th",{children:"Ø§Ù„Ù…Ù‚Ø§Ø³"},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:883,columnNumber:54},this),n.hasVariants&&e.jsxDEV("th",{children:"Ø§Ù„Ù„ÙˆÙ†"},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:884,columnNumber:54},this),e.jsxDEV("th",{children:"Ø³Ø¹Ø± Ø§Ù„Ø´Ø±Ø§Ø¡"},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:885,columnNumber:29},this),e.jsxDEV("th",{children:"Ø§Ù„Ù†Ø³Ø¨Ø© %"},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:886,columnNumber:29},this),e.jsxDEV("th",{children:"Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹"},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:887,columnNumber:29},this),e.jsxDEV("th",{children:"Ø³Ø¹Ø± Ø§Ù„Ø¬Ù…Ù„Ø©"},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:888,columnNumber:29},this),k.length===0&&e.jsxDEV("th",{children:"Ø§Ù„ÙƒÙ…ÙŠØ©"},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:889,columnNumber:57},this),k.map(s=>e.jsxDEV("th",{children:[s.icon||"ðŸ­"," ",s.name]},s.id,!0,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:890,columnNumber:52},this)),k.length>0&&e.jsxDEV("th",{children:"Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ"},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:891,columnNumber:55},this),e.jsxDEV("th",{children:"Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯"},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:892,columnNumber:29},this),n.hasVariants&&e.jsxDEV("th",{},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:893,columnNumber:54},this)]},void 0,!0,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:882,columnNumber:27},this)},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:881,columnNumber:25},this),e.jsxDEV("tbody",{children:n.hasVariants?n.variants.map((s,r)=>{const t=ne(s),l=Z(s.cost,s.price);return e.jsxDEV("tr",{children:[e.jsxDEV("td",{children:e.jsxDEV("input",{type:"text",value:s.size,onChange:c=>A(r,"size",c.target.value),placeholder:"M"},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:903,columnNumber:35},this)},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:902,columnNumber:33},this),e.jsxDEV("td",{children:e.jsxDEV("input",{type:"text",value:s.color,onChange:c=>A(r,"color",c.target.value),placeholder:"Ø£Ø³ÙˆØ¯"},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:906,columnNumber:35},this)},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:905,columnNumber:33},this),e.jsxDEV("td",{children:e.jsxDEV("input",{type:"number",min:"0",step:"0.01",value:s.cost,onChange:c=>A(r,"cost",c.target.value)},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:909,columnNumber:35},this)},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:908,columnNumber:33},this),e.jsxDEV("td",{children:e.jsxDEV("input",{type:"number",step:"0.01",value:l,onChange:c=>{const a=U(c.target.value,0);A(r,"price",u(s.cost*(1+a/100)))}},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:912,columnNumber:35},this)},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:911,columnNumber:33},this),e.jsxDEV("td",{children:e.jsxDEV("input",{type:"number",min:"0",step:"0.01",value:s.price,onChange:c=>A(r,"price",c.target.value)},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:918,columnNumber:35},this)},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:917,columnNumber:33},this),e.jsxDEV("td",{children:e.jsxDEV("input",{type:"number",min:"0",step:"0.01",className:"form-input",value:j.wholesalePrice,disabled:!0,title:"Ø§Ù„Ø³Ø¹Ø± Ù…Ø­Ø¯Ø¯ Ù„Ù„ÙˆØ­Ø¯Ø© Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©"},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:921,columnNumber:35},this)},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:920,columnNumber:33},this),k.length===0&&e.jsxDEV("td",{children:e.jsxDEV("input",{type:"number",min:"0",value:s.quantity,onChange:c=>A(r,"quantity",c.target.value)},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:933,columnNumber:37},this)},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:932,columnNumber:35},this),k.map(c=>e.jsxDEV("td",{children:e.jsxDEV("input",{type:"number",min:"0",value:J(s,c.id),onChange:a=>ve(s,c.id,a.target.value)},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:938,columnNumber:37},this)},c.id,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:937,columnNumber:35},this)),k.length>0&&e.jsxDEV("td",{style:{textAlign:"center",fontWeight:"bold"},children:t},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:941,columnNumber:59},this),e.jsxDEV("td",{children:e.jsxDEV("div",{className:"unit-barcode-field",style:{display:"flex"},children:[e.jsxDEV("input",{type:"text",value:s.barcode||"",onChange:c=>A(r,"barcode",c.target.value)},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:944,columnNumber:37},this),e.jsxDEV("button",{type:"button",className:"btn-icon",onClick:()=>Ve(r),title:"ØªÙˆÙ„ÙŠØ¯ Ø¨Ø§Ø±ÙƒÙˆØ¯ Ø§Ù„Ù…ØªØºÙŠØ±",children:e.jsxDEV(X,{size:14},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:946,columnNumber:39},this)},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:945,columnNumber:37},this)]},void 0,!0,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:943,columnNumber:35},this)},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:942,columnNumber:33},this),e.jsxDEV("td",{children:n.variants.length>1&&e.jsxDEV("button",{type:"button",className:"delete-btn",onClick:()=>we(r),"aria-label":"Ø­Ø°Ù Ø§Ù„Ù…ØªØºÙŠØ±",children:e.jsxDEV(fe,{size:16},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:953,columnNumber:39},this)},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:952,columnNumber:37},this)},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:950,columnNumber:33},this)]},s.tempId||s.id||r,!0,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:901,columnNumber:31},this)}):e.jsxDEV("tr",{children:[e.jsxDEV("td",{children:e.jsxDEV("input",{type:"number",min:"0",step:"0.01",value:j.purchasePrice,onChange:s=>q("purchasePrice",s.target.value)},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:962,columnNumber:33},this)},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:961,columnNumber:31},this),e.jsxDEV("td",{children:e.jsxDEV("input",{type:"number",step:"0.01",value:Z(j.purchasePrice,j.salePrice),onChange:s=>ke(s.target.value)},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:965,columnNumber:33},this)},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:964,columnNumber:31},this),e.jsxDEV("td",{children:e.jsxDEV("input",{type:"number",min:"0",step:"0.01",value:j.salePrice,onChange:s=>q("salePrice",s.target.value)},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:968,columnNumber:33},this)},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:967,columnNumber:31},this),e.jsxDEV("td",{children:e.jsxDEV("input",{type:"number",min:"0",step:"0.01",value:j.wholesalePrice,onChange:s=>q("wholesalePrice",s.target.value)},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:971,columnNumber:33},this)},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:970,columnNumber:31},this),k.length===0&&e.jsxDEV("td",{style:{textAlign:"center",fontWeight:"bold"},children:H},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:974,columnNumber:33},this),k.map(s=>{const r=z.find(l=>l.warehouseId===s.id),t=r?D(r.quantity,0):0;return e.jsxDEV("td",{children:e.jsxDEV("input",{type:"number",min:"0",value:t,onChange:l=>{const c=D(l.target.value,0);B(a=>{const V=a.filter(C=>C.warehouseId!==s.id);return c>0||f==="edit"?[...V,{warehouseId:s.id,quantity:c,warehouse:s}]:V})}},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:981,columnNumber:37},this)},s.id,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:980,columnNumber:35},this)}),k.length>0&&e.jsxDEV("td",{style:{textAlign:"center",fontWeight:"bold"},children:H},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:992,columnNumber:57},this),e.jsxDEV("td",{children:e.jsxDEV("div",{className:"unit-barcode-field",style:{display:"flex"},children:[e.jsxDEV("input",{type:"text",value:j.barcode||n.barcode||"",onChange:s=>q("barcode",s.target.value)},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:995,columnNumber:35},this),e.jsxDEV("button",{type:"button",className:"btn-icon",onClick:ie,title:"ØªÙˆÙ„ÙŠØ¯ Ø¨Ø§Ø±ÙƒÙˆØ¯",children:e.jsxDEV(X,{size:14},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:997,columnNumber:37},this)},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:996,columnNumber:35},this)]},void 0,!0,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:994,columnNumber:33},this)},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:993,columnNumber:31},this)]},void 0,!0,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:960,columnNumber:29},this)},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:896,columnNumber:25},this)]},void 0,!0,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:880,columnNumber:23},this)},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:879,columnNumber:21},this)]},void 0,!0,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:857,columnNumber:19},this),k.length===0&&e.jsxDEV("div",{style:{marginTop:"20px",padding:"16px",backgroundColor:"#fef3c7",borderRadius:"8px",border:"1px solid #fbbf24",textAlign:"center"},children:e.jsxDEV("span",{style:{color:"#92400e"},children:"âš ï¸ Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø®Ø§Ø²Ù† Ù†Ø´Ø·Ø©. ÙŠØ±Ø¬Ù‰ Ø¥Ø¶Ø§ÙØ© Ù…Ø®Ø§Ø²Ù† Ù…Ù† ØµÙØ­Ø© Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø§Ø²Ù†."},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:1010,columnNumber:23},this)},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:1009,columnNumber:21},this)]},void 0,!0,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:800,columnNumber:17},this):null]},void 0,!0,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:680,columnNumber:13},this)},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:673,columnNumber:9},this),e.jsxDEV("div",{className:"product-modal-footer",children:[e.jsxDEV("button",{type:"button",className:"btn-cancel",onClick:d,disabled:g,children:"Ø¥Ù„ØºØ§Ø¡"},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:1022,columnNumber:11},this),e.jsxDEV("button",{type:"button",className:"btn-save",onClick:Ce,disabled:F,children:g?"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­ÙØ¸...":I&&w?"Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...":e.jsxDEV(e.Fragment,{children:[e.jsxDEV(he,{size:16},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:1024,columnNumber:105},this)," Ø­ÙØ¸ Ø§Ù„Ù…Ù†ØªØ¬"]},void 0,!0,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:1024,columnNumber:103},this)},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:1023,columnNumber:11},this)]},void 0,!0,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:1021,columnNumber:9},this)]},void 0,!0,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:653,columnNumber:7},this),e.jsxDEV(Ge,{isOpen:De,onClose:()=>te(!1),units:Q,onUpdateUnits:s=>{ye(s);try{localStorage.setItem("erp_custom_units",JSON.stringify(s))}catch{}}},void 0,!1,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:1029,columnNumber:7},this)]},void 0,!0,{fileName:"D:/erp-new/erp system/erp-desktop/src/components/products/ProductModal.jsx",lineNumber:652,columnNumber:5},this):null}export{Je as default};
